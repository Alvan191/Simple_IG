<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <title>Home Page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

  <div class="container mt-4">

    <h4>Buat Post</h4>

    <!-- FORM POST -->
    <form action="/insta" method="post">
      <textarea name="content" class="form-control mb-2" placeholder="Tulis postingan..." required></textarea>

      <button type="submit" class="btn btn-primary">
        Post
      </button>
    </form>

    <hr>

    <!--LIST POST-->
    {{ range .Posts }}
    <div class="card mb-3">
      <div class="card-body">
        <h6>{{ if .User }}{{ .User.Username }}{{ else }}Unknown{{ end }}</h6>
        <p>{{ .Content}}</p>
        <small class="text-muted">{{ .CreatedAt.Format "02 Jan 2006 15:04" }}</small>

        <!--Comment FORM-->
        <form action="/posts/{{ .ID}}/comments" method="post" class="mt-2">
          <textarea name="content" class="form-control mb-2" placeholder="Tulis Komentar....." required></textarea>
          <button type="submit" class="btn btn-sm btn-secondary">Reply</button>
        </form>

        <!--COMMENTS-->
        {{ range .Coments }}
        <div class="mt-2 ps-3 border-start">
          <strong>{{ .User.Username }}</strong>: {{ .Content }}
          <br><small class="text-muted">{{ .CreatedAt.Format "02 Jan 2006 15:04" }}</small>
        </div>
        {{ end }}

      </div>
    </div>
    {{ end }}

  </div>

</body>

</html>